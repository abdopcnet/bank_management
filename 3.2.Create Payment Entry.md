# Case 2: Create Payment Entry

## When to Use This Case:

**Use Case 2 when**:

-   ✅ Bank Transaction **related to a Customer or Supplier** (party exists)
-   ✅ Party visible in bank statement description
-   ❌ No Payment Entry already recorded in system
-   ✅ Examples: Customer payment, Supplier payment, Employee advance

**Do NOT use Case 2 when**:

-   ❌ Transaction has **NO party** (no customer, no supplier) → Use Case 3 (Journal Entry)
-   ❌ Transaction is bank charges/fees → Use Case 3 (Journal Entry)
-   ❌ Transaction is bank interest → Use Case 3 (Journal Entry)
-   ❌ Transaction is internal transfer → Use Case 3 (Journal Entry)

---

## Scenario Example:

-   ❌ No Payment Entry recorded in system
-   ✅ Bank statement shows: Deposit 1000 (description: "Payment from Customer ABC")
-   ✅ **Party identified**: Customer ABC
-   ✅ Goal: Create Payment Entry for Customer ABC and match it

---

## Steps:

1. **Open Dialog**: Click "Actions" on the Bank Transaction

2. **Select Action**:

    - `action`: **"Create Voucher"**

3. **Select Document Type**:

    - `document_type`: **"Payment Entry"**

4. **Fill Required Fields**:

    - `party_type`: **Customer** (for deposit) or **Supplier** (for withdrawal)
    - `party`: **Select customer/supplier name**
    - `reference_number`: **CHQ-001** (auto-filled from Bank Transaction)
    - `posting_date`: **2024-01-15** (auto-filled from Bank Transaction date)
    - `reference_date`: **2024-01-15** (auto-filled from Bank Transaction date)

5. **Fill Optional Fields**:

    - `mode_of_payment`: Select from list (or leave empty)
    - `project`: Optional
    - `cost_center`: Optional

6. **Click "Reconcile"**:
    - Function called: `create_payment_entry_bts()`
    - System creates Payment Entry with:
        - `payment_type`: Receive (for deposit) or Pay (for withdrawal)
        - `paid_from` / `paid_to`: Bank account + Party account
        - `paid_amount`: From Bank Transaction amount
    - System submits Payment Entry
    - System links it with Bank Transaction
    - **Result**: Payment Entry created, submitted, and matched
